<h1><%= @site.name %></h1>
<script type="text/javascript" charset="utf-8">
  $(function() {
    new Highcharts.Chart({
      chart: {renderTo: "URLs"},
      title: {text: "Insight Scores"},
      xAxis: {type: "datetime"},
      yAxis: {title: {text: "(n/100)"}},
      series: [{
        name: 'Mobile Speed',
        pointInterval: <%= 1.day * 1000 %>,
        pointStart: <%= 3.weeks.ago.to_i * 1000 %>,
        data: [10, 10, 10, 10, <%= @mobile.speed %>]
      }, {
        name: 'Mobile UX',
        pointInterval: <%= 1.day * 1000 %>,
        pointStart: <%= 3.weeks.ago.to_i * 1000 %>,
        data: [10, 10, 10, 10, <%= @mobile.usability %>]
      }, {
        name: 'Desktop Speed',
        pointInterval: <%= 1.day * 1000 %>,
        pointStart: <%= 3.weeks.ago.to_i * 1000 %>,
        data: [10, 10, 10, 10, <%= @desktop.speed %>]
      }],
    });
  }); </script>   

<div id="URLs" style="width:560px; height:300px;"></div>


<div class="page-header">
  <%= link_to sites_path, class: 'btn btn-default' do %>
    <span class="glyphicon glyphicon-list-alt"></span>
    Back
  <% end %>
  <%= link_to edit_site_path(@site), class: 'btn btn-primary' do %>
    <span class="glyphicon glyphicon-pencil"></span>
    Edit
  <% end %>
</div>

<div class="table-responsive">
  <table class="table table-striped table-bordered table-hover">
    <thead>
    <tr>
      <th>Date</th>
      <th>Desktop Speed</th>
      <th>Mobile Speed</th>
      <th>Mobile Usability</th>
    </tr>
    </thead>

    <tbody>
    <% @site.webstats.each_with_index do |stat, index| %>
      <tr>
        <td><%= stat.pull_date.getlocal.strftime("%m/%d/%Y") %></td>
        <td class='<%= up_down(stat.desktop_score, @site.webstats[index - 1].try(:desktop_score)) %>'><%= stat.desktop_score %></td>
        <td><%= stat.mobile_score %></td>
        <td><%= stat.mobile_usability %></td>
      </tr>
    <% end %>
    </tbody>
  </table>
</div>
